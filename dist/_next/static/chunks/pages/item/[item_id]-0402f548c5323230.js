(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{2531:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var s=a(7876),n=a(4232),r=a(9099),o=a(9650),i=a(9081),l=a(6591),c=a(2774),d=a(9983),u=a(6303),m=a(672),x=a(8928);function h(e){let{...t}=e;return(0,s.jsx)(u.bL,{"data-slot":"dialog",...t})}function f(e){let{...t}=e;return(0,s.jsx)(u.l9,{"data-slot":"dialog-trigger",...t})}function p(e){let{...t}=e;return(0,s.jsx)(u.ZL,{"data-slot":"dialog-portal",...t})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(u.hJ,{"data-slot":"dialog-overlay",className:(0,x.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function j(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(p,{"data-slot":"dialog-portal",children:[(0,s.jsx)(g,{}),(0,s.jsxs)(u.UC,{"data-slot":"dialog-content",className:(0,x.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[a,(0,s.jsxs)(u.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(m.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function v(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,x.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function y(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,x.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(u.hE,{"data-slot":"dialog-title",className:(0,x.cn)("text-lg leading-none font-semibold",t),...a})}function b(e){let{className:t,...a}=e;return(0,s.jsx)(u.VY,{"data-slot":"dialog-description",className:(0,x.cn)("text-muted-foreground text-sm",t),...a})}var w=a(3397),E=a(5627);let _=()=>{let e=(0,r.useRouter)(),{item_id:t}=e.query,[a,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(!0),[p,g]=(0,n.useState)(null),[_,T]=(0,n.useState)(!1),[I,k]=(0,n.useState)(""),[C,L]=(0,n.useState)(!1),[R,S]=(0,n.useState)(null),[D,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e.isReady&&t?(x(!0),g(null),(0,o.v5)(t).then(u).catch(e=>{console.error("Error fetching public item:",e),g(e.message||"Failed to load item details."),u(null)}).finally(()=>x(!1))):!t&&e.isReady&&x(!1)},[e.isReady,t]);let q=async e=>{e.preventDefault(),L(!0),S(null),P(!1);try{await (0,o.us)(t,I),P(!0),setTimeout(()=>{T(!1),P(!1),k(""),S(null)},3e3)}catch(e){S(e.message||"Failed to submit found report.")}finally{L(!1)}},F=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}catch(t){return e}};return m?(0,s.jsx)("div",{className:"container mx-auto p-4 max-w-2xl",children:(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(c.E,{className:"h-6 w-3/4"}),(0,s.jsx)(c.E,{className:"h-4 w-1/2 mt-1"})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsx)(c.E,{className:"h-4 w-full"}),(0,s.jsx)(c.E,{className:"h-4 w-full"}),(0,s.jsx)(c.E,{className:"h-20 w-full"})]}),(0,s.jsx)(i.wL,{children:(0,s.jsx)(c.E,{className:"h-10 w-32"})})]})}):p?(0,s.jsx)("div",{className:"container mx-auto p-4 max-w-2xl",children:(0,s.jsxs)(l.Fc,{variant:"destructive",children:[(0,s.jsx)(l.XL,{children:"Error Loading Item"}),(0,s.jsx)(l.TN,{children:p})]})}):a?(0,s.jsx)("div",{className:"container mx-auto p-4 max-w-2xl",children:(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Lost Item Details"}),(0,s.jsxs)(i.BT,{children:["Reported on: ",F(a.created_at)]})]}),(0,s.jsxs)(i.Wu,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-sm",children:"Description:"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.description||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-sm",children:"Date Lost:"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:F(a.date_lost)})]}),a.product_link&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-sm",children:"Product Link:"}),(0,s.jsx)("a",{href:a.product_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline break-all",children:a.product_link})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-sm",children:"Images:"}),a.image_filenames&&a.image_filenames.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-1",children:a.image_filenames.map(e=>(0,s.jsx)("img",{src:"/images/".concat(e),alt:"Lost item image",className:"rounded border aspect-square object-cover",onError:e=>e.target.style.display="none"},e))}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No images available."})]}),(a.city||a.state||a.country)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-sm",children:"Location:"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:[a.city,a.state,a.country].filter(Boolean).join(", ")})]})]}),(0,s.jsx)(i.wL,{children:(0,s.jsxs)(h,{open:_,onOpenChange:T,children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(d.$,{children:"I Found This Item"})}),(0,s.jsxs)(j,{className:"sm:max-w-[425px] bg-accent/20 backdrop-blur-3xl",children:[(0,s.jsxs)(v,{children:[(0,s.jsx)(N,{children:"Report Item Found"}),(0,s.jsx)(b,{children:"Provide your contact details so the owner can reach you. Your details will be sent directly to them."})]}),D?(0,s.jsx)("div",{className:"py-4 text-center",children:(0,s.jsx)("p",{className:"text-green-600 font-medium",children:"Thank you! Your contact information has been sent to the item's reporter."})}):(0,s.jsxs)("form",{onSubmit:q,className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(E.J,{htmlFor:"finderContact",className:"text-right col-span-1",children:"Contact Info"}),(0,s.jsx)(w.p,{id:"finderContact",value:I,onChange:e=>k(e.target.value),placeholder:"Email, phone, etc.",required:!0,minLength:5,className:"col-span-3"})]}),R&&(0,s.jsx)("p",{className:"text-red-500 text-sm col-span-4",children:R}),(0,s.jsx)(y,{children:(0,s.jsx)(d.$,{type:"submit",disabled:C,children:C?"Submitting...":"Send Contact Info"})})]})]})]})})]})}):(0,s.jsx)("div",{className:"container mx-auto p-4 max-w-2xl",children:(0,s.jsxs)(l.Fc,{children:[(0,s.jsx)(l.XL,{children:"Item Not Found"}),(0,s.jsx)(l.TN,{children:"The requested item could not be found."})]})})}},5627:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var s=a(7876);a(4232);var n=a(9773),r=a(8928);function o(e){let{className:t,...a}=e;return(0,s.jsx)(n.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},6591:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>i,TN:()=>c,XL:()=>l});var s=a(7876);a(4232);var n=a(9518),r=a(8928);let o=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(o({variant:a}),t),...n})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}},6936:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/item/[item_id]",function(){return a(2531)}])},9081:(e,t,a)=>{"use strict";a.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>i,Zp:()=>r,aR:()=>o,wL:()=>d});var s=a(7876);a(4232);var n=a(8928);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},9650:(e,t,a)=>{"use strict";a.d(t,{If:()=>i,LD:()=>x,WA:()=>n,X6:()=>c,Yh:()=>r,fk:()=>m,i6:()=>u,nP:()=>d,us:()=>l,v5:()=>o});let s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("/api").concat(e);try{let e=await fetch(a,{...t,headers:{...t.body instanceof FormData?{}:{"Content-Type":"application/json"},...t.headers}});if(!e.ok){var s,n;let t;try{t=await e.json()}catch(a){t={message:e.statusText||"HTTP error! Status: ".concat(e.status)}}console.error("API Error Response:",a,t);let r=(null==(n=t.detail)||null==(s=n[0])?void 0:s.msg)||t.detail,o=t.message;throw Error(r||o||"HTTP error! Status: ".concat(e.status))}if(204===e.status||"0"===e.headers.get("content-length"))return null;let r=e.headers.get("content-type");if(r&&r.includes("text/plain"))return await e.text();return await e.json()}catch(e){throw console.error("API Request Failed:",a,e),Error(e.message||"An unexpected network error occurred.")}},n=async e=>s("/items",{method:"POST",body:e}),r=async(e,t)=>{if(!e||!t)throw Error("Item ID and token are required for management view.");return s("/items/".concat(e,"/manage?token=").concat(encodeURIComponent(t)),{method:"GET"})},o=async e=>{if(!e)throw Error("Item ID is required for public view.");return s("/items/".concat(e),{method:"GET"})},i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s("/items?skip=".concat(e,"&limit=").concat(t),{method:"GET"})},l=async(e,t)=>{if(!e||!t)throw Error("Item ID and finder contact info are required.");return s("/items/".concat(e,"/found"),{method:"POST",body:JSON.stringify({finder_contact:t}),headers:{"Content-Type":"application/json"}})},c=async()=>s("/locations/countries",{method:"GET"}),d=async e=>{if(!e)throw Error("Country name is required to fetch states.");return s("/locations/states?country=".concat(encodeURIComponent(e)),{method:"GET"})},u=async(e,t)=>{if(!e||!t)throw Error("Country and state names are required to fetch cities.");return s("/locations/cities?country=".concat(encodeURIComponent(e),"&state=").concat(encodeURIComponent(t)),{method:"GET"})},m=async(e,t,a)=>{if(!e||!t)throw Error("Item ID and token required for update.");return s("/items/".concat(e,"/manage?token=").concat(encodeURIComponent(t)),{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})},x=async(e,t)=>{if(!e||!t)throw Error("Item ID and token required for deletion.");return s("/items/".concat(e,"/manage?token=").concat(encodeURIComponent(t)),{method:"DELETE"})}},9773:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});var s=a(4232),n=a(6326),r=a(7876),o=s.forwardRef((e,t)=>(0,r.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var i=o}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6936)),_N_E=e.O()}]);