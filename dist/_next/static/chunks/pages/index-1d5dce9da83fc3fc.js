(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2774:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var s=r(7876),n=r(8488);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,n.cn)("bg-accent animate-pulse rounded-md",t),...r})}},2898:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7428)}])},6591:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>c,XL:()=>d});var s=r(7876);r(4232);var n=r(9518),a=r(8488);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,a.cn)(i({variant:r}),t),...n})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,a.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,a.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}},7428:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(7876),n=r(4232),a=r(8230),i=r.n(a),o=r(9650),d=r(9983),c=r(9081),l=r(6591),u=r(2774);function m(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[m,h]=(0,n.useState)(!0),[g,x]=(0,n.useState)(!0),[f,p]=(0,n.useState)(null),[v,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{h(!0),x(!0),p(null),j(null),Promise.all([(0,o.If)(0,6),(0,o.Ix)(0,6)]).then(e=>{let[r,s]=e;t(r||[]),a(s||[])}).catch(e=>{console.error("Error fetching items for homepage:",e),p("Failed to load lost items."),j("Failed to load found items.")}).finally(()=>{h(!1),x(!1)})},[]);let b=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch(t){return e}};return(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsxs)("aside",{className:"w-64 bg-card p-4 border-r hidden md:block",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Lost & Found"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Helping reunite owners with their lost items."})]}),(0,s.jsxs)("main",{className:"flex-1 p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-xl font-bold md:hidden",children:"Lost & Found"}),(0,s.jsx)("h1",{className:"text-2xl font-bold hidden md:block",children:"Welcome to Lost & Found"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(i(),{href:"/report-found",passHref:!0,children:(0,s.jsx)(d.$,{children:"Report Found Item"})}),(0,s.jsx)(i(),{href:"/report",passHref:!0,children:(0,s.jsx)(d.$,{children:"Report Lost Item"})})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Recently Lost Items"}),(0,s.jsx)(i(),{href:"/lost",passHref:!0,children:(0,s.jsx)(d.$,{variant:"link",size:"sm",children:"View All Lost"})})]}),m?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,t)=>(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(u.E,{className:"h-5 w-3/4"})}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)(u.E,{className:"h-4 w-full"})}),(0,s.jsx)(c.wL,{children:(0,s.jsx)(u.E,{className:"h-4 w-1/2"})})]},"lost-skeleton-".concat(t)))}):f?(0,s.jsxs)(l.Fc,{variant:"destructive",children:[(0,s.jsx)(l.XL,{children:"Error Loading Lost Items"}),(0,s.jsx)(l.TN,{children:f})]}):0===e.length?(0,s.jsx)("p",{className:"text-muted-foreground",children:"No lost items recently reported."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[e.image_filenames&&e.image_filenames.length>0&&(0,s.jsx)("img",{src:"/images/".concat(e.image_filenames[0]),alt:"Lost item preview",className:"rounded border aspect-video object-cover mb-2",onError:e=>e.target.style.display="none"}),(0,s.jsxs)(c.ZB,{className:"text-lg truncate",children:[e.description.substring(0,50),e.description.length>50?"...":""]}),(0,s.jsxs)(c.BT,{children:["Lost on: ",b(e.date_lost)]})]}),(0,s.jsx)(c.wL,{children:(0,s.jsx)(i(),{href:"/item/".concat(e._id),passHref:!0,children:(0,s.jsx)(d.$,{variant:"outline",size:"sm",children:"View Details"})})})]},e._id))})]}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Recently Found Items"}),(0,s.jsx)(i(),{href:"/found",passHref:!0,children:(0,s.jsx)(d.$,{variant:"link",size:"sm",children:"View All Found"})})]}),g?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(u.E,{className:"h-5 w-3/4"})}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)(u.E,{className:"h-4 w-full"})}),(0,s.jsx)(c.wL,{children:(0,s.jsx)(u.E,{className:"h-4 w-1/2"})})]},"found-skeleton-".concat(t)))}):v?(0,s.jsxs)(l.Fc,{variant:"destructive",children:[(0,s.jsx)(l.XL,{children:"Error Loading Found Items"}),(0,s.jsx)(l.TN,{children:v})]}):0===r.length?(0,s.jsx)("p",{className:"text-muted-foreground",children:"No found items recently reported."}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[" ",r.map(e=>(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[e.image_filenames&&e.image_filenames.length>0&&(0,s.jsx)("img",{src:"/images/".concat(e.image_filenames[0]),alt:"Found item preview",className:"rounded border aspect-video object-cover mb-2",onError:e=>e.target.style.display="none"}),(0,s.jsxs)(c.ZB,{className:"text-lg truncate",children:[e.description.substring(0,50),e.description.length>50?"...":""]}),(0,s.jsxs)(c.BT,{children:["Found on: ",b(e.date_found)]})]}),(0,s.jsx)(c.wL,{})]},e._id))]})]})]})]})}},8488:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(9241),n=r(9573);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}},9081:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>a,aR:()=>i,wL:()=>l});var s=r(7876);r(4232);var n=r(8488);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},9650:(e,t,r)=>{"use strict";r.d(t,{If:()=>o,Ix:()=>m,LD:()=>g,Qj:()=>u,WA:()=>n,X6:()=>d,Yh:()=>a,fk:()=>h,i6:()=>l,nP:()=>c,v5:()=>i});let s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat("/api").concat(e);try{let e=await fetch(r,{...t,headers:{...t.body instanceof FormData?{}:{"Content-Type":"application/json"},...t.headers}});if(!e.ok){var s,n;let t;try{t=await e.json()}catch(r){t={message:e.statusText||"HTTP error! Status: ".concat(e.status)}}console.error("API Error Response:",r,t);let a=(null==(n=t.detail)||null==(s=n[0])?void 0:s.msg)||t.detail,i=t.message;throw Error(a||i||"HTTP error! Status: ".concat(e.status))}if(204===e.status||"0"===e.headers.get("content-length"))return null;let a=e.headers.get("content-type");if(a&&a.includes("text/plain"))return await e.text();return await e.json()}catch(e){throw console.error("API Request Failed:",r,e),Error(e.message||"An unexpected network error occurred.")}},n=async e=>s("/items",{method:"POST",body:e}),a=async(e,t)=>{if(!e||!t)throw Error("Item ID and token are required for management view.");return s("/items/".concat(e,"/manage?token=").concat(encodeURIComponent(t)),{method:"GET"})},i=async e=>{if(!e)throw Error("Item ID is required for public view.");return s("/items/".concat(e),{method:"GET"})},o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s("/items?skip=".concat(e,"&limit=").concat(t),{method:"GET"})},d=async()=>s("/locations/countries",{method:"GET"}),c=async e=>{if(!e)throw Error("Country name is required to fetch states.");return s("/locations/states?country=".concat(encodeURIComponent(e)),{method:"GET"})},l=async(e,t)=>{if(!e||!t)throw Error("Country and state names are required to fetch cities.");return s("/locations/cities?country=".concat(encodeURIComponent(e),"&state=").concat(encodeURIComponent(t)),{method:"GET"})},u=async e=>{if(!(e instanceof FormData))throw Error("formData must be an instance of FormData.");if(!e.has("description")||!e.get("description"))throw Error("Description is required.");if(!e.has("date_found")||!e.get("date_found"))throw Error("Date found is required.");return s("/found-items",{method:"POST",body:e})},m=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s("/found-items?skip=".concat(e,"&limit=").concat(t),{method:"GET"})},h=async(e,t,r)=>{if(!e||!t)throw Error("Item ID and token required for update.");return s("/items/".concat(e,"/manage?token=").concat(encodeURIComponent(t)),{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})},g=async(e,t)=>{if(!e||!t)throw Error("Item ID and token required for deletion.");return s("/items/".concat(e,"/manage?token=").concat(encodeURIComponent(t)),{method:"DELETE"})}},9983:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>o});var s=r(7876);r(4232);var n=r(2987),a=r(9518),i=r(8488);let o=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:a,asChild:d=!1,...c}=e,l=d?n.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,i.cn)(o({variant:r,size:a,className:t})),...c})}}},e=>{var t=t=>e(e.s=t);e.O(0,[987,230,636,593,792],()=>t(2898)),_N_E=e.O()}]);