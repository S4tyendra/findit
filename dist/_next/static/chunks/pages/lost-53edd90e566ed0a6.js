(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{2774:(t,e,r)=>{"use strict";r.d(e,{E:()=>s});var n=r(7876),a=r(8928);function s(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...r})}},5258:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var n=r(7876),a=r(4232),s=r(8230),o=r.n(s),i=r(9650),c=r(9983),d=r(9081),l=r(6591),u=r(2774);function m(){let[t,e]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{s(!0),h(null),(0,i.If)().then(t=>e(t||[])).catch(t=>{console.error("Error fetching lost items:",t),h(t.message||"Failed to load lost items."),e([])}).finally(()=>s(!1))},[]);let f=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch(e){return t}};return(0,n.jsxs)("div",{className:"container mx-auto p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Reported Lost Items"}),(0,n.jsx)(o(),{href:"/report",passHref:!0,children:(0,n.jsx)(c.$,{children:"Report a Lost Item"})})]}),r?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((t,e)=>(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{children:(0,n.jsx)(u.E,{className:"h-5 w-3/4"})}),(0,n.jsx)(d.Wu,{children:(0,n.jsx)(u.E,{className:"h-4 w-full"})}),(0,n.jsx)(d.wL,{children:(0,n.jsx)(u.E,{className:"h-4 w-1/2"})})]},e))}):m?(0,n.jsxs)(l.Fc,{variant:"destructive",children:[(0,n.jsx)(l.XL,{children:"Error"}),(0,n.jsx)(l.TN,{children:m})]}):0===t.length?(0,n.jsx)("p",{className:"text-muted-foreground",children:"No lost items have been reported yet."}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(t=>(0,n.jsxs)(d.Zp,{children:[(0,n.jsxs)(d.aR,{children:[t.image_filenames&&t.image_filenames.length>0&&(0,n.jsx)("img",{src:"/images/".concat(t.image_filenames[0]),alt:"Lost item preview",className:"rounded border aspect-video object-cover mb-2",onError:t=>t.target.style.display="none"}),(0,n.jsxs)(d.ZB,{className:"text-lg truncate",children:[t.description.substring(0,50),t.description.length>50?"...":""]}),(0,n.jsxs)(d.BT,{children:["Lost on: ",f(t.date_lost)]})]}),(0,n.jsx)(d.wL,{children:(0,n.jsx)(o(),{href:"/item/".concat(t._id),passHref:!0,children:(0,n.jsx)(c.$,{variant:"outline",size:"sm",children:"View Details"})})})]},t._id))})]})}},6591:(t,e,r)=>{"use strict";r.d(e,{Fc:()=>i,TN:()=>d,XL:()=>c});var n=r(7876);r(4232);var a=r(9518),s=r(8928);let o=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(t){let{className:e,variant:r,...a}=t;return(0,n.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(o({variant:r}),e),...a})}function c(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"alert-title",className:(0,s.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...r})}function d(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...r})}},8178:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/lost",function(){return r(5258)}])},9081:(t,e,r)=>{"use strict";r.d(e,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>s,aR:()=>o,wL:()=>l});var n=r(7876);r(4232);var a=r(8928);function s(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function o(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function c(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function d(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}function l(t){let{className:e,...r}=t;return(0,n.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}},9650:(t,e,r)=>{"use strict";r.d(e,{If:()=>c,Ix:()=>f,LD:()=>x,Qj:()=>h,WA:()=>s,X6:()=>l,Yh:()=>o,fk:()=>p,g8:()=>v,i6:()=>m,nP:()=>u,nV:()=>g,us:()=>d,v5:()=>i});let n=r(5364).env.NEXT_PUBLIC_API_URL||"/api",a=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(n).concat(t);try{let t=await fetch(r,{...e,headers:{...e.body instanceof FormData?{}:{"Content-Type":"application/json"},...e.headers}});if(!t.ok){var a,s;let e;try{e=await t.json()}catch(r){e={message:t.statusText||"HTTP error! Status: ".concat(t.status)}}console.error("API Error Response:",r,e);let n=(null==(s=e.detail)||null==(a=s[0])?void 0:a.msg)||e.detail,o=e.message;throw Error(n||o||"HTTP error! Status: ".concat(t.status))}if(204===t.status||"0"===t.headers.get("content-length"))return null;let n=t.headers.get("content-type");if(n&&n.includes("text/plain"))return await t.text();return await t.json()}catch(t){throw console.error("API Request Failed:",r,t),Error(t.message||"An unexpected network error occurred.")}},s=async t=>a("/items",{method:"POST",body:t}),o=async(t,e)=>{if(!t||!e)throw Error("Item ID and token are required for management view.");return a("/items/".concat(t,"/manage?token=").concat(encodeURIComponent(e)),{method:"GET"})},i=async t=>{if(!t)throw Error("Item ID is required for public view.");return a("/items/".concat(t),{method:"GET"})},c=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a("/items?skip=".concat(t,"&limit=").concat(e),{method:"GET"})},d=async(t,e)=>{try{let r=await fetch("".concat(API_BASE,"/items/").concat(t,"/found"),{method:"POST",body:e});if(!r.ok){let t=await r.json();throw Error(t.detail||"Failed to submit found report")}return!0}catch(t){throw console.error("Error submitting found report:",t),t}},l=async()=>a("/locations/countries",{method:"GET"}),u=async t=>{if(!t)throw Error("Country name is required to fetch states.");return a("/locations/states?country=".concat(encodeURIComponent(t)),{method:"GET"})},m=async(t,e)=>{if(!t||!e)throw Error("Country and state names are required to fetch cities.");return a("/locations/cities?country=".concat(encodeURIComponent(t),"&state=").concat(encodeURIComponent(e)),{method:"GET"})},h=async t=>{if(!(t instanceof FormData))throw Error("formData must be an instance of FormData.");if(!t.has("description")||!t.get("description"))throw Error("Description is required.");if(!t.has("date_found")||!t.get("date_found"))throw Error("Date found is required.");return a("/found-items",{method:"POST",body:t})},f=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a("/found-items?skip=".concat(t,"&limit=").concat(e),{method:"GET"})},g=async t=>{if(!t)throw Error("Item ID is required for public view.");return a("/found-items/".concat(t),{method:"GET"})},p=async(t,e,r)=>{if(!t||!e)throw Error("Item ID and token required for update.");return a("/items/".concat(t,"/manage?token=").concat(encodeURIComponent(e)),{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})},x=async(t,e)=>{if(!t||!e)throw Error("Item ID and token required for deletion.");return a("/items/".concat(t,"/manage?token=").concat(encodeURIComponent(e)),{method:"DELETE"})},v=async(t,e)=>{let{ownerEmail:r,ownerDescription:n}=e;return a("/found-items/".concat(t,"/claim"),{method:"POST",body:JSON.stringify({owner_email:r,owner_description:n})})}}},t=>{var e=e=>t(t.s=e);t.O(0,[636,593,792],()=>e(8178)),_N_E=t.O()}]);