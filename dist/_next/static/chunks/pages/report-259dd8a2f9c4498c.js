(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{1906:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/report",function(){return a(6550)}])},6550:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var l=a(7876),s=a(4232),i=a(9099),n=a(9983),r=a(3397),c=a(8069),d=a(5627),m=a(7040),o=a(9650),u=a(9081);let p=()=>{(0,i.useRouter)();let[e,t]=(0,s.useState)(""),[a,p]=(0,s.useState)(""),[h,x]=(0,s.useState)(null),[g,j]=(0,s.useState)(""),[y,N]=(0,s.useState)({country:"",state:"",city:""}),[f,v]=(0,s.useState)([]),[S,_]=(0,s.useState)(!1),[w,b]=(0,s.useState)(null),[k,E]=(0,s.useState)(""),L=async l=>{if(l.preventDefault(),_(!0),b(null),E(""),!h){b("Please select the date the item was lost."),_(!1);return}let s=new FormData;s.append("description",e),s.append("reporter_email",a),s.append("date_lost",h.toISOString()),s.append("product_link",g),y.country&&s.append("country",y.country),y.state&&s.append("state",y.state),y.city&&s.append("city",y.city),f.forEach(e=>{s.append("images",e)});try{let e=await (0,o.WA)(s);E("Report submitted successfully! Your management link has been sent to ".concat(a,". Item ID: ").concat(e.id)),t(""),p(""),x(null),j(""),N({country:"",state:"",city:""}),v([]);let l=document.getElementById("images");l&&(l.value=null)}catch(e){b(e.message||"Failed to submit report.")}finally{_(!1)}};return(0,l.jsx)("div",{className:"container mx-auto p-4 max-w-2xl",children:(0,l.jsxs)(u.Zp,{children:[(0,l.jsxs)(u.aR,{children:[(0,l.jsx)(u.ZB,{children:"Report a Lost Item"}),(0,l.jsx)(u.BT,{children:"Fill in the details of the item you lost. We'll send a management link to your email."})]}),(0,l.jsx)(u.Wu,{children:(0,l.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d.J,{htmlFor:"description",children:"Item Description *"}),(0,l.jsx)(c.T,{id:"description",value:e,onChange:e=>t(e.target.value),placeholder:"Detailed description of the lost item...",required:!0,minLength:10,maxLength:1e3,className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.J,{htmlFor:"reporterEmail",children:"Your Email *"}),(0,l.jsx)(r.p,{id:"reporterEmail",type:"email",value:a,onChange:e=>p(e.target.value),placeholder:"your.email@example.com",required:!0,className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.J,{htmlFor:"dateLost",children:"Date Lost *"}),(0,l.jsx)(r.p,{id:"dateLost",type:"date",onChange:e=>{try{let t=new Date(e.target.value);isNaN(t.getTime())?x(null):(x(t),b(null))}catch(e){x(null)}},required:!0,className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.J,{htmlFor:"productLink",children:"Product Link (Optional)"}),(0,l.jsx)(r.p,{id:"productLink",type:"url",value:g,onChange:e=>j(e.target.value),placeholder:"https://example.com/product-page",className:"mt-1"})]}),(0,l.jsx)(m.A,{onLocationChange:N}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(d.J,{htmlFor:"images",children:["Images (Up to ",5,")"]}),(0,l.jsx)(r.p,{id:"images",type:"file",multiple:!0,accept:"image/jpeg, image/png, image/webp, image/gif",onChange:e=>{let t=Array.from(e.target.files);f.length+t.length>5?(b("You can upload a maximum of ".concat(5," images.")),e.target.value=null):(v(e=>[...e,...t]),b(null))},className:"mt-1"}),(0,l.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:["Selected images: ",f.length]}),f.length>0&&(0,l.jsx)("ul",{className:"mt-2 list-disc list-inside",children:f.map((e,t)=>(0,l.jsx)("li",{className:"text-xs",children:e.name},t))})]}),w&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:w}),k&&(0,l.jsx)("p",{className:"text-green-600 text-sm",children:k}),(0,l.jsx)(n.$,{type:"submit",disabled:S,className:"w-full",children:S?"Submitting...":"Submit Report"})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[33,54,636,593,792],()=>t(1906)),_N_E=e.O()}]);